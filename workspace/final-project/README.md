Final Project Baselines
------------------------------------------
This repo contains some baseline implementations of an Eyeriss-like architecture, modified with different dimensions for the spaital array.

### System requirement

Please perform a `pull` of the docker image before you start the project. 
And run the following command inside the directory that contains the docker-compose.yaml file to get the latest docker:
  
```
docker-compose pull
```

### File Structure
- example_designs: 
   - Architecture descriptions, compound component descriptions, 
  constraints descriptions, mapper descriptions for the example designs.
   - Note that for each architecture, we have 2 constraint files:
        1. *_arch_constraints.yaml describes the necessary hardware and dataflow constraints
        2. *_map_constraits.yaml describes the map space optimizations for the  designs
- layer_shapes: 
    - Workloads to be generated after running convert.
- scripts
    - A set of scripts to convert, profile, and aggregate workloads.
    - Please refer to the repository for [PyTorch2Timeloop Converter](https://github.com/Accelergy-Project/pytorch2timeloop-converter) for the basis of `convert.py`. We modified it for our project.

### Run simulations

To run a simulation using timeloop-accelergy system, you can run the scripts in `scripts/profile`.

You will see the following outputs generated:
- timeloop-mapper.accelergy.log: accelergy's runtime info while generating the ERT.
- timeloop-mapper.ART.yaml: the area reference table generated by Accelergy for the architecture
- timeloop-mapper.ART_summary.yaml: the area reference table for the components as well as the associated plug-ins used for generating the outputs.
- timeloop-mapper.ERT.yaml: the energy reference table generated by Accelergy for the architecture.
- timeloop-mapper.ERT_summary.yaml: the energy reference table for the components as well as the associated plug-ins used for generating the outputs.
- timeloop-mapper.flattened_architecture.yaml: the fully defined and flattened architecture interpreted by Accelergy.
- timeloop-mapper.log: timeloop runtime info.
- timeloop-mapper.map.txt: the best mapping found by Timeloop mapper.
- timeloop-mapper.stats.txt: the runtime behaviors of the components in the design generated by Timeloop.
- timeloop-mapper.ma+stats.xml: the raw information generated by Timeloop -- you don't need to read into it.

** Note that for the provided designs and workloads, your simulation should generally converge within 30 mins. Once you see
the simulations converging, you can press `ctrl + C` to manually stop them. They sometimes will take much longer to 
automaticaly stop as we set the converging cretiria to be pretty high to avoid early-stop with subooptimal mappings. 
Please use you own judgement. **
